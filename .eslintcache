[{"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/index.js":"1","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/reportWebVitals.js":"2","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/App.js":"3","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Header.js":"4","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Footer.js":"5","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/PopupWithForm.js":"6","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Main.js":"7","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/EditProfilePopup.js":"8","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/ImagePopup.js":"9","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/AddPlacePopup.js":"10","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/EditAvatarPopup.js":"11","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Register.js":"12","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/context/CurrentUserContext.js":"13","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Login.js":"14","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/utils/api.js":"15","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Card.js":"16","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/ProtectedRoute.js":"17","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/utils/Auth.js":"18","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/InfoToolTip.js":"19","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/utils/auth.js":"20"},{"size":624,"mtime":1615812611966,"results":"21","hashOfConfig":"22"},{"size":362,"mtime":1610113031458,"results":"23","hashOfConfig":"22"},{"size":9103,"mtime":1616847769965,"results":"24","hashOfConfig":"22"},{"size":1104,"mtime":1615826697273,"results":"25","hashOfConfig":"22"},{"size":222,"mtime":1611582670359,"results":"26","hashOfConfig":"22"},{"size":821,"mtime":1611760946229,"results":"27","hashOfConfig":"22"},{"size":2520,"mtime":1616060743822,"results":"28","hashOfConfig":"22"},{"size":2242,"mtime":1616069271749,"results":"29","hashOfConfig":"22"},{"size":773,"mtime":1611753062717,"results":"30","hashOfConfig":"22"},{"size":1937,"mtime":1616151539639,"results":"31","hashOfConfig":"22"},{"size":1176,"mtime":1616840732224,"results":"32","hashOfConfig":"22"},{"size":1883,"mtime":1615813195877,"results":"33","hashOfConfig":"22"},{"size":90,"mtime":1611672411928,"results":"34","hashOfConfig":"22"},{"size":1649,"mtime":1616782588868,"results":"35","hashOfConfig":"22"},{"size":2520,"mtime":1616845259728,"results":"36","hashOfConfig":"22"},{"size":1878,"mtime":1616845179764,"results":"37","hashOfConfig":"22"},{"size":432,"mtime":1615471513423,"results":"38","hashOfConfig":"22"},{"size":1244,"mtime":1616061254212,"results":"39","hashOfConfig":"22"},{"size":862,"mtime":1616061262588,"results":"40","hashOfConfig":"22"},{"size":1229,"mtime":1616844817118,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"1ckiehw",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/index.js",[],["84","85"],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/reportWebVitals.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/App.js",["86"],"import React, { useEffect, useState } from \"react\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport api from \"../utils/api\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoToolTip from \"./InfoToolTip\";\nimport { register, authorize, getContent } from \"../utils/auth\";\n\nfunction App() {\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n    const [isInfoToolTipPopupOpen, setIsInfoToolTipPopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState(false);\n\n    const [loggedIn, setLoggedIn] = useState(false);\n    const [regSuccsesStatusInfo, setRegSuccsesStatusInfo] = useState(false);\n    const [userEmail, setUserEmail] = useState(\" \");\n\n    const [currentUser, setCurrentUser] = useState({});\n    const [cards, setCards] = useState([]);\n\n    const history = useHistory();\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"jwt\");\n        if(!token) {\n            return\n        } else {\n            api.setHeadersToken(token);\n\n            Promise.all([api.getCards(), api.getUserInformation()])\n                .then(([cardsData, userData]) => {\n                    setCards(cardsData);\n                    setCurrentUser(userData);\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n        }\n    }, [loggedIn]);\n\n    const handleRegister = (email, password) => {\n        register(email, password)\n            .then((res) => {\n                if (res) {\n                    setLoggedIn(true);\n                    setRegSuccsesStatusInfo(true);\n                    setIsInfoToolTipPopupOpen(true);\n                    history.push(\"/sign-in\");\n                }\n            })\n            .catch((err) => {\n                setRegSuccsesStatusInfo(false);\n                setIsInfoToolTipPopupOpen(true);\n                if (err === \"Error 400\") {\n                    return console.log(\"Не верно заполнено одно из поле\");\n                }\n                if (err === \"Error 409\") {\n                    return console.log(\"Такой пользователь уже существует\");\n                }\n                console.log(err)\n            });\n    };\n\n    const handleLogin = (email, password) => {\n        authorize(email, password)\n            .then((res) => {\n                if (res.token) {\n                    localStorage.setItem(\"jwt\", res.token);\n                    setLoggedIn(true);\n                    setUserEmail(email);\n                    history.push(\"/\");\n                }\n            })\n            .catch((err) => {\n                setRegSuccsesStatusInfo(false);\n                setIsInfoToolTipPopupOpen(true);\n                if (err === \"Error 400\") {\n                    return console.log(\"Не верно заполнено одно из поле\");\n                }\n                if (err === \"Error 401\") {\n                    return console.log(\"Неправильные почта или пароль\");\n                }\n                console.log(err);\n            });\n    };\n\n    const handleLogOut = () => {\n        localStorage.removeItem(\"jwt\");\n        setLoggedIn(false);\n        history.push(\"/sign-in\");\n    };\n\n    const tokenCheck = () => {\n        const jwt = localStorage.getItem(\"jwt\");\n        if (jwt) {\n            getContent(jwt)\n                .then((res) => {\n                    if (res) {\n                        setLoggedIn(true);\n                        setUserEmail(res.email);\n                        history.push(\"/\");\n                    }\n                })\n                .catch((err) => {\n                    console.log(err)\n                });\n        }\n    };\n\n    useEffect(() => {\n        tokenCheck();\n    }, [loggedIn]);\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some((i) => i === currentUser._id);\n        api.changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                const newCards = cards.map((c) =>\n                    c._id === card._id ? newCard : c\n                );\n                setCards(newCards);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleCardDelete(card) {\n        api.removeCard(card._id)\n            .then(() => {\n                setCards(cards.filter((item) => item._id !== card._id));\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleUpdateUser(userData) {\n        api.editUserInfo(userData)\n            .then((data) => {\n                setCurrentUser(data);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleUpdateAavatar({ avatar }) {\n        api.editUserAvatar(avatar)\n            .then((data) => {\n                setCurrentUser(data);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleAddPlace(placeData) {\n        api.addNewCard(placeData)\n            .then((data) => {\n                setCards([data, ...cards]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n    }\n\n    function closeAllPopups() {\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setSelectedCard(false);\n        setIsInfoToolTipPopupOpen(false);\n    }\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n                <Header userEmail={userEmail} onSignOut={handleLogOut} />\n\n                <Switch>\n                    <Route path=\"/sign-up\">\n                        <Register onRegister={handleRegister} />\n                    </Route>\n\n                    <Route path=\"/sign-in\">\n                        <Login onLogin={handleLogin} />\n                    </Route>\n\n                    <ProtectedRoute\n                        exact\n                        path=\"/\"\n                        loggedIn={loggedIn}\n                        component={Main}\n                        onEditAvatar={handleEditAvatarClick}\n                        onEditProfile={handleEditProfileClick}\n                        onAddPlace={handleAddPlaceClick}\n                        onCardClick={handleCardClick}\n                        onCardLike={handleCardLike}\n                        onCardDelete={handleCardDelete}\n                        cards={cards}\n                    />\n\n                    <Route>\n                        {loggedIn ? (\n                            <Redirect to=\"/\" />\n                        ) : (\n                            <Redirect to=\"/sign-in\" />\n                        )}\n                    </Route>\n                </Switch>\n\n                <Footer />\n\n                <EditProfilePopup\n                    isOpen={isEditProfilePopupOpen}\n                    onClose={closeAllPopups}\n                    onUpdateUser={handleUpdateUser}\n                />\n\n                <EditAvatarPopup\n                    isOpen={isEditAvatarPopupOpen}\n                    onClose={closeAllPopups}\n                    onUpdateAvatar={handleUpdateAavatar}\n                />\n\n                <AddPlacePopup\n                    isOpen={isAddPlacePopupOpen}\n                    onClose={closeAllPopups}\n                    onAddPlace={handleAddPlace}\n                />\n\n                <PopupWithForm\n                    name=\"popup__remove-card\"\n                    title=\"Вы уверены?\"\n                    submitButtonText=\"Да\"\n                ></PopupWithForm>\n\n                <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n                <InfoToolTip\n                    isOpen={isInfoToolTipPopupOpen}\n                    onClose={closeAllPopups}\n                    isSuccses={regSuccsesStatusInfo}\n                />\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n","/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Header.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Footer.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/PopupWithForm.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Main.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/EditProfilePopup.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/ImagePopup.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/AddPlacePopup.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/EditAvatarPopup.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Register.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/context/CurrentUserContext.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Login.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/utils/api.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/Card.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/ProtectedRoute.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/utils/Auth.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/components/InfoToolTip.js",[],"/Users/nikacoma/Documents/yandex_praktikum/react-mesto-auth/src/utils/auth.js",[],{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","severity":1,"message":"92","line":124,"column":8,"nodeType":"93","endLine":124,"endColumn":18,"suggestions":"94"},"no-native-reassign",["95"],"no-negated-in-lhs",["96"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'tokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["97"],"no-global-assign","no-unsafe-negation",{"desc":"98","fix":"99"},"Update the dependencies array to be: [loggedIn, tokenCheck]",{"range":"100","text":"101"},[4295,4305],"[loggedIn, tokenCheck]"]